{% extends 'main_header.html' %}

{% block title %}Order History - Zay Shop{% endblock %}

{% block main_content %}
<div class="container py-5">
    <h2 class="text-success mb-4">Your Order History</h2>
    {% if orders_dict %}
        {% for order, items in orders_dict.items %}
            <div class="card mb-4 shadow-sm rounded-4 border-0">
                <div class="card-body">
                    <h5 class="card-title">Order #{{ order.id }}</h5>
                    <p class="card-text mb-1"><strong>Date:</strong> {{ order.created_at|date:"F d, Y H:i" }}</p>
                    <p class="card-text mb-1"><strong>Email:</strong> {{ order.email }}</p>
                    <p class="card-text mb-3"><strong>Total:</strong> ${{ items.total}}</p>

                    <h6>Items:</h6>
                    <ul class="list-group list-group-flush mb-2">
                        {% for item in items.items %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    {{ item.product }} (x{{ item.quantity }})
                                </div>
                                <div>${{ item.total}}</div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info">You have no orders yet.</div>
    {% endif %}
</div>
{% endblock %}